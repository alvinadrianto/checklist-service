<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist Servis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @media print {
            .no-print { display: none; }
            .print-only { display: block; }
        }
        .print-only { display: none; }
        .completed { 
            background-color: #f0fdf4;
            border-color: #22c55e;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded shadow">
        <!-- Vehicle Info -->
        <div class="mb-6" id="infoSection">
            <input id="plateNumber" placeholder="Nomor Polisi" class="w-full p-2 mb-2 border rounded uppercase">
            
            <select id="carModel" class="w-full p-2 mb-2 border rounded">
                <option value="">Pilih Model</option>
                <option>HONDA BRIO</option>
                <option>HONDA MOBILIO</option>
                <option>HONDA HRV</option>
                <option>HONDA BRV</option>
                <option>HONDA CRV</option>
                <option>HONDA JAZZ</option>
                <option>HONDA CIVIC</option>
                <option>HONDA CITY</option>
                <option>HONDA FREED</option>
                <option>HONDA ACCORD</option>
            </select>

            <input type="number" id="km" placeholder="Kilometer" class="w-full p-2 mb-2 border rounded">
            
            <select id="serviceType" class="w-full p-2 mb-2 border rounded">
                <option value="">Jenis Servis</option>
                <option>Servis 1.000 KM</option>
                <option>Servis 10.000 KM</option>
                <option>Servis 20.000 KM</option>
                <option>Servis 30.000 KM</option>
                <option>Servis 40.000 KM</option>
                <option>Servis 50.000 KM</option>
            </select>

            <input type="date" id="date" class="w-full p-2 mb-4 border rounded">
            
            <button onclick="lockInfo()" id="lockBtn" class="w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                Konfirmasi Data
            </button>
        </div>

        <!-- Tasks Section -->
        <div id="taskSection" style="display:none;">
            <div class="grid grid-cols-2 gap-2 mb-4">
                <button onclick="addTask('precheck')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Pre-Check</button>
                <button onclick="addTask('oil')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Oli</button>
                <button onclick="addTask('brake')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Rem</button>
                <button onclick="addTask('transmission')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Transmisi</button>
                <button onclick="addTask('tuneup')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Tune Up</button>
                <button onclick="addTask('coolant')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Coolant</button>
                <button onclick="addTask('wheel')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Roda</button>
                <button onclick="addTask('sparkplug')" class="p-2 bg-blue-500 text-white rounded hover:bg-blue-600">+ Busi</button>
            </div>

            <div class="flex gap-2 mb-4">
                <input id="customTask" placeholder="Task tambahan..." class="flex-1 p-2 border rounded">
                <button onclick="addCustomTask()" class="px-4 bg-green-500 text-white rounded hover:bg-green-600">+</button>
            </div>

            <div id="taskList" class="mb-4 space-y-2"></div>

            <div class="space-y-2">
                <button onclick="deleteAllTasks()" class="w-full p-2 bg-red-500 text-white rounded hover:bg-red-600">
                    Hapus Semua Task
                </button>
                <button onclick="window.print()" class="w-full p-2 bg-gray-500 text-white rounded hover:bg-gray-600">
                    Print PDF
                </button>
            </div>
        </div>

        <!-- Print Layout -->
        <div class="print-only">
            <h1 class="text-2xl font-bold mb-4 text-center">Checklist Servis Mobil</h1>
            <!-- Info Kendaraan -->
            <div id="printInfo" class="mb-4 border p-4 rounded-lg shadow-sm bg-gray-50">
                <table class="w-full border-collapse mb-4 text-sm">
                    <tr>
                        <td class="border p-2 font-semibold">Nomor Polisi</td>
                        <td class="border p-2">: ${document.getElementById('plateNumber').value}</td>
                    </tr>
                    <tr>
                        <td class="border p-2 font-semibold">Model Kendaraan</td>
                        <td class="border p-2">: ${document.getElementById('carModel').value}</td>
                    </tr>
                    <tr>
                        <td class="border p-2 font-semibold">Kilometer</td>
                        <td class="border p-2">: ${document.getElementById('km').value} KM</td>
                    </tr>
                    <tr>
                        <td class="border p-2 font-semibold">Jenis Servis</td>
                        <td class="border p-2">: ${document.getElementById('serviceType').value}</td>
                    </tr>
                    <tr>
                        <td class="border p-2 font-semibold">Tanggal</td>
                        <td class="border p-2">: ${document.getElementById('date').value}</td>
                    </tr>
                </table>
            </div>
            
            <!-- Tabel Tugas -->
            <div id="printTasks" class="mb-4 border p-4 rounded-lg shadow-sm bg-gray-50">
                <table class="w-full border-collapse text-sm">
                    <thead>
                        <tr>
                            <th class="border p-2 bg-gray-200 font-semibold">Task</th>
                            <th class="border p-2 bg-gray-200 font-semibold">Status</th>
                            <th class="border p-2 bg-gray-200 font-semibold">Spesifikasi</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${checklist.map(task => `
                            <tr class="${task.completed ? 'bg-green-50' : ''}">
                                <td class="border p-2">${task.text}</td>
                                <td class="border p-2 text-center">${task.completed ? 'âœ“ Selesai' : 'Belum Selesai'}</td>
                                <td class="border p-2">${task.spec || '-'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
            
            <!-- Signature -->
            <div class="mt-8 flex justify-between">
                <div class="text-center">
                    <p>Mekanik</p>
                    <div class="mt-16 border-t border-black w-32">(_____________)</div>
                </div>
                <div class="text-center">
                    <p>Customer</p>
                    <div class="mt-16 border-t border-black w-32">(_____________)</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tasks = {
            precheck: [
                { text: 'Cek semua lampu (sein, rem, head lamp)' },
                { text: 'Cek indikator warning di panel' },
                { text: 'Cek kondisi steering gearbox' },
                { text: 'Cek kondisi & fungsi wiper' },
                { text: 'Cek ketinggian rem tangan' },
                { text: 'Cek fungsi power window' },
                { text: 'Cek fungsi spion elektrik' },
                { text: 'Cek fungsi central lock' }
            ],
            oil: [
                { text: 'Isi oli mesin sesuai spesifikasi' },
                { text: 'Torsi baut drain oli', spec: '25-30 Nm' },
                { text: 'Torsi filter oli', spec: '15-17 Nm' }
            ],
            brake: [
                { text: 'Torsi kaliper rem', spec: '35-40 Nm' },
                { text: 'Cek kondisi & ketebalan kampas rem depan/belakang' },
                { text: 'Cek kondisi minyak rem' }
            ],
            transmission: [
                { text: 'Isi oli transmisi sesuai spesifikasi' },
                { text: 'Torsi baut drain transmisi', spec: '30-35 Nm' }
            ],
            tuneup: [
                { text: 'Cek kondisi filter udara' },
                { text: 'Cek kondisi busi' },
                { text: 'Cek idle speed' },
                { text: 'Cek timing pengapian' }
            ],
            coolant: [
                { text: 'Cek level & kualitas coolant' },
                { text: 'Isi coolant sesuai spesifikasi' }
            ],
            wheel: [
                { text: 'Cek tekanan ban' },
                { text: 'Cek kondisi & ketebalan ban' },
                { text: 'Rotasi ban jika perlu' }
            ],
            sparkplug: [
                { text: 'Ganti busi sesuai spesifikasi' },
                { text: 'Torsi busi', spec: '20-25 Nm' }
            ]
        };

        let checklist = [];

        function lockInfo() {
            document.getElementById('infoSection').style.display = 'none';
            document.getElementById('taskSection').style.display = 'block';
        }

        function addTask(category) {
            checklist = checklist.concat(tasks[category].map(task => ({ ...task, completed: false })));
            renderTasks();
        }

        function addCustomTask() {
            const customTask = document.getElementById('customTask').value.trim();
            if (customTask) {
                checklist.push({ text: customTask, completed: false });
                renderTasks();
                document.getElementById('customTask').value = '';
            }
        }

        function toggleTask(index) {
            checklist[index].completed = !checklist[index].completed;
            renderTasks();
        }

        function deleteAllTasks() {
            if (confirm("Apakah Anda yakin ingin menghapus semua tugas?")) {
                checklist = [];
                renderTasks();
            }
        }

        function renderTasks() {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = '';
            checklist.forEach((task, index) => {
                const taskElement = document.createElement('div');
                taskElement.className = `p-2 border rounded ${task.completed ? 'completed' : ''}`;
                taskElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <input type="checkbox" onclick="toggleTask(${index})" ${task.completed ? 'checked' : ''} class="mr-2">
                            <span>${task.text}</span>
                            ${task.spec ? `<span class="text-xs text-gray-500">(${task.spec})</span>` : ''}
                        </div>
                        <button onclick="removeTask(${index})" class="text-red-500"><i class="fas fa-trash-alt"></i></button>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
        }

        function removeTask(index) {
            checklist.splice(index, 1);
            renderTasks();
        }
    </script>
</body>
</html>