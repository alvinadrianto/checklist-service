<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist Servis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none; }
            .print-only { display: block; }
        }
        .print-only { display: none; }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded shadow">
        <!-- Vehicle Info -->
        <div class="mb-6" id="infoSection">
            <input id="plateNumber" placeholder="Nomor Polisi" class="w-full p-2 mb-2 border rounded uppercase">
            
            <select id="carModel" class="w-full p-2 mb-2 border rounded">
                <option value="">Pilih Model</option>
                <option>HONDA BRIO</option>
                <option>HONDA MOBILIO</option>
                <option>HONDA HRV</option>
                <option>HONDA BRV</option>
                <option>HONDA CRV</option>
                <option>HONDA JAZZ</option>
                <option>HONDA CIVIC</option>
                <option>HONDA CITY</option>
                <option>HONDA FREED</option>
                <option>HONDA ACCORD</option>
            </select>

            <input type="number" id="km" placeholder="Kilometer" class="w-full p-2 mb-2 border rounded">
            
            <select id="serviceType" class="w-full p-2 mb-2 border rounded">
                <option value="">Jenis Servis</option>
                <option>Servis 1.000 KM</option>
                <option>Servis 10.000 KM</option>
                <option>Servis 20.000 KM</option>
                <option>Servis 30.000 KM</option>
                <option>Servis 40.000 KM</option>
                <option>Servis 50.000 KM</option>
            </select>

            <input type="date" id="date" class="w-full p-2 mb-4 border rounded">
            
            <button onclick="lockInfo()" id="lockBtn" class="w-full p-2 bg-blue-500 text-white rounded">
                Konfirmasi Data
            </button>
        </div>

        <!-- Tasks Section (Hidden initially) -->
        <div id="taskSection" style="display:none;">
            <div class="grid grid-cols-2 gap-2 mb-4">
                <button onclick="addTask('precheck')" class="p-2 bg-blue-500 text-white rounded">+ Pre-Check</button>
                <button onclick="addTask('oil')" class="p-2 bg-blue-500 text-white rounded">+ Oli</button>
                <button onclick="addTask('brake')" class="p-2 bg-blue-500 text-white rounded">+ Rem</button>
                <button onclick="addTask('transmission')" class="p-2 bg-blue-500 text-white rounded">+ Transmisi</button>
                <button onclick="addTask('tuneup')" class="p-2 bg-blue-500 text-white rounded">+ Tune Up</button>
                <button onclick="addTask('coolant')" class="p-2 bg-blue-500 text-white rounded">+ Coolant</button>
                <button onclick="addTask('wheel')" class="p-2 bg-blue-500 text-white rounded">+ Roda</button>
                <button onclick="addTask('sparkplug')" class="p-2 bg-blue-500 text-white rounded">+ Busi</button>
            </div>

            <div id="taskList" class="mb-4"></div>

            <button onclick="window.print()" class="w-full p-2 bg-gray-500 text-white rounded">
                Print PDF
            </button>
        </div>

        <!-- Print Layout -->
        <div class="print-only">
            <h1 class="text-xl font-bold mb-4 text-center">Checklist Servis</h1>
            <div id="printInfo" class="mb-4"></div>
            <div id="printTasks"></div>
            <div class="mt-8 flex justify-between">
                <div class="text-center">
                    <p>Mekanik</p>
                    <div class="mt-16 border-t border-black w-32">(_____________)</div>
                </div>
                <div class="text-center">
                    <p>Customer</p>
                    <div class="mt-16 border-t border-black w-32">(_____________)</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tasks = {
            precheck: [
                'Cek lampu-lampu',
                'Cek indikator',
                'Cek power window',
                'Cek wiper',
                'Cek rem tangan'
            ],
            oil: [
                'Ganti oli mesin',
                'Torsi baut oli (25-30Nm)',
                'Ganti filter oli'
            ],
            brake: [
                'Cek pad rem',
                'Torsi kaliper (35-40Nm)',
                'Bleeding rem'
            ],
            transmission: [
                'Cek oli transmisi',
                'Torsi drain transmisi'
            ],
            tuneup: [
                'Bersihkan throttle',
                'Cek filter udara',
                'Setel idle'
            ],
            coolant: [
                'Cek level coolant',
                'Cek tutup radiator'
            ],
            wheel: [
                'Torsi roda (80-100Nm)',
                'Cek kondisi ban'
            ],
            sparkplug: [
                'Ganti busi',
                'Torsi busi (20-25Nm)'
            ]
        };

        let checklist = [];

        function lockInfo() {
            if (!document.getElementById('plateNumber').value ||
                !document.getElementById('carModel').value ||
                !document.getElementById('km').value ||
                !document.getElementById('serviceType').value ||
                !document.getElementById('date').value) {
                alert('Mohon lengkapi semua data');
                return;
            }

            document.querySelectorAll('#infoSection input, #infoSection select').forEach(el => el.disabled = true);
            document.getElementById('lockBtn').style.display = 'none';
            document.getElementById('taskSection').style.display = 'block';
            updatePrintVersion();
        }

        function addTask(type) {
            tasks[type].forEach(task => {
                if (!checklist.includes(task)) {
                    checklist.push(task);
                }
            });
            renderTasks();
        }

        function renderTasks() {
            const list = document.getElementById('taskList');
            list.innerHTML = checklist.map((task, index) => `
                <div class="flex items-center gap-2 p-2 border rounded mb-2">
                    <input type="checkbox" onchange="updatePrintVersion()">
                    <span>${task}</span>
                </div>
            `).join('');
            updatePrintVersion();
        }

        function updatePrintVersion() {
            // Info kendaraan
            document.getElementById('printInfo').innerHTML = `
                <div class="border p-4 mb-4">
                    <p>Nomor Polisi: ${document.getElementById('plateNumber').value}</p>
                    <p>Model: ${document.getElementById('carModel').value}</p>
                    <p>Kilometer: ${document.getElementById('km').value}</p>
                    <p>Jenis Servis: ${document.getElementById('serviceType').value}</p>
                    <p>Tanggal: ${document.getElementById('date').value}</p>
                </div>
            `;

            // Tasks
            const boxes = document.querySelectorAll('#taskList input[type="checkbox"]');
            document.getElementById('printTasks').innerHTML = `
                <table class="w-full border-collapse">
                    <tr>
                        <th class="border p-2">Task</th>
                        <th class="border p-2" style="width: 100px;">Status</th>
                    </tr>
                    ${checklist.map((task, i) => `
                        <tr>
                            <td class="border p-2">${task}</td>
                            <td class="border p-2 text-center">
                                ${boxes[i]?.checked ? 'âœ“' : ''}
                            </td>
                        </tr>
                    `).join('')}
                </table>
            `;
        }
    </script>
</body>
</html>